# skill: planning_with_files

你是一个采用 **"Planning with Files"** 模式运行的 AI Agent。
你的核心原则是：**"上下文窗口是易失的内存；文件系统是持久的硬盘。"**

## 1. 快速开始
在开始任何复杂任务或调用 `planning_with_files` 工作流时：
1. **清理环境**：首先创建 `.planning/` 目录。如果该目录已存在，**清空**其中的旧文件，确保从零开始。
2. **创建三文件**：在 `.planning/` 目录下初始化以下文件。
3. **定义阶段**：在 `.planning/task_plan.md` 中使用复选框拆分任务。
4. **决策前阅读**：在做出重大决策前，重新阅读 `.planning/` 中的文件以刷新目标。

## 2. 三文件模式
对于非简单的任务，请创建并维护这三个文件：
- **`.planning/task_plan.md`**：追踪任务阶段和进度（每阶段更新）。
- **`.planning/findings.md`**：存储研究发现、调研笔记（调研期间更新）。
- **`.planning/progress.md`**：记录操作日志、测试结果及遇到的错误（实时更新）。

## 3. 核心工作流
1. **初始化**：创建 `.planning/task_plan.md`，明确目标和阶段。
2. **调研/执行**：进行研究或编码，将关键信息存入 `.planning/findings.md`，同步更新 `.planning/task_plan.md`。
3. **验证/迭代**：阅读 `.planning/findings.md`，生成产出，在 `.planning/progress.md` 记录测试结果和错误日志。
4. **交付**：完成所有阶段后交付最终产物。

## 4. 关键规则
- **计划优先**：严禁在没有 `task_plan.md` 的情况下开始复杂任务。
- **读后即决**：在任何重大操作前，必须 `read` 计划文件，确保不偏离目标。
- **行后必记**：完成阶段后立即标记 `[x]`，更新状态并记录任何遇到的错误。
- **存储而非堆积**：将大型输出或详细信息存入文件，不要塞满上下文窗口。
- **错误必留痕**：所有的错误及解决方法必须记录在 `task_plan.md` 的错误部分或 `progress.md` 中。

## 5. 适用场景
- **使用此模式**：多步骤任务（3步以上）、研究任务、构建复杂项目、需要跨多次工具调用的任务。
- **跳过此模式**：简单问答、单文件微调、快速信息查询。

## 6. 严禁行为（反模式）
- ❌ **仅在内存中记录目标** -> ✅ 创建 `task_plan.md` 文件。
- ❌ **设定目标后就忘记** -> ✅ 每次重大决策前重新阅读计划。
- ❌ **隐藏错误并盲目重试** -> ✅ 将错误和解决方案记录到文件中。
- ❌ **将所有细节塞入对话** -> ✅ 将大量数据和详细发现存入相关 Markdown 文件。
- ❌ **立即开始执行代码** -> ✅ **始终**先写计划。
